<!DOCTYPE html>
<html lang="kk">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <title>Beybaris AI v3.0 [Ultimate Logic]</title>
    <link href="https://fonts.googleapis.com/css2?family=Outfit:wght@300;400;600&display=swap" rel="stylesheet">
    <style>
        :root {
            --bg: #050505;
            --glass: rgba(20, 20, 30, 0.6);
            --border: rgba(255, 255, 255, 0.15);
            --accent: #00f2ea;
            --accent-dark: #0080ff;
        }

        body {
            margin: 0; padding: 0; height: 100vh;
            background: var(--bg);
            background-image: linear-gradient(180deg, rgba(0,0,0,0) 0%, rgba(0,229,255,0.05) 100%);
            font-family: 'Outfit', sans-serif;
            color: #e0e0e0; display: flex; flex-direction: column;
            overflow: hidden;
        }

        header {
            padding: 15px; text-align: center;
            background: rgba(5, 5, 10, 0.9);
            backdrop-filter: blur(15px);
            border-bottom: 1px solid var(--border);
            z-index: 10;
        }

        header h1 {
            margin: 0; font-size: 1.3rem; letter-spacing: 2px; font-weight: 600;
            background: linear-gradient(90deg, #fff, var(--accent));
            -webkit-background-clip: text; -webkit-text-fill-color: transparent;
        }

        #chat-box {
            flex: 1; overflow-y: auto; padding: 20px;
            display: flex; flex-direction: column; gap: 18px;
            scrollbar-width: thin;
            scrollbar-color: var(--border) transparent;
        }

        .message {
            max-width: 88%; padding: 14px 18px; border-radius: 20px;
            font-size: 0.95rem; line-height: 1.7;
            position: relative; word-wrap: break-word;
        }

        .ai-message {
            align-self: flex-start; background: rgba(255, 255, 255, 0.05);
            border: 1px solid var(--border); border-top-left-radius: 4px;
            color: #d1d5db;
        }

        .user-message {
            align-self: flex-end; background: linear-gradient(135deg, #2563eb, #1e40af);
            color: white; border-bottom-right-radius: 4px;
            box-shadow: 0 4px 15px rgba(37, 99, 235, 0.3);
        }

        /* “í—ã–ª—ã–º–∏ —Ñ–æ—Ä–º—É–ª–∞–ª–∞—Ä –º–µ–Ω –ª–æ–≥–∏–∫–∞–ª—ã“õ —Ç—ñ–∑—ñ–º–¥–µ—Ä “Ø—à—ñ–Ω */
        .message strong { color: var(--accent); font-weight: 600; }
        .message ul, .message ol { margin: 10px 0; padding-left: 20px; }
        .message li { margin-bottom: 5px; }

        .typing {
            padding: 10px 25px; font-size: 0.8rem; color: var(--accent);
            display: none; font-style: italic; opacity: 0.7; letter-spacing: 1px;
        }

        .input-area {
            padding: 15px; background: rgba(5, 5, 10, 0.95);
            backdrop-filter: blur(20px); border-top: 1px solid var(--border);
            display: flex; gap: 12px;
            padding-bottom: max(15px, env(safe-area-inset-bottom));
        }

        input {
            flex: 1; background: rgba(255,255,255,0.07); border: 1px solid var(--border);
            padding: 14px 20px; border-radius: 12px; color: white; outline: none;
            font-size: 16px; transition: all 0.3s;
        }

        input:focus { border-color: var(--accent); background: rgba(255,255,255,0.1); }

        button {
            width: 54px; height: 54px; border-radius: 12px; border: none;
            background: linear-gradient(135deg, var(--accent), var(--accent-dark));
            color: white; font-size: 1.2rem; cursor: pointer;
            transition: transform 0.2s;
        }

        button:active { transform: scale(0.95); }
    </style>
</head>
<body>

<header><h1>BEYBARIS AI<span style="font-size:0.7em; opacity:0.7"></span></h1></header>

<div id="chat-box">
    <div class="message ai-message">üëã –°”ô–ª–µ–º! –ú–µ–Ω <b>Beybaris AI</b> –º—ã–Ω
–ú–∞“ì–∞–Ω —Å“±—Ä–∞“õ –Ω–µ–º–µ—Å–µ –µ—Å–µ–ø –±–µ—Ä–µ –∞–ª–∞—Å—ã–∑. –ú–µ–Ω –∂–∞—É–∞–ø –±–µ—Ä—É–≥–µ –¥–∞–π—ã–Ω–º—ã–Ω! üöÄ</div>
</div>

<div id="typing-status" class="typing"><strong>Beybaris –∂–∞—É–∞–ø –∂–∞—É–∑–¥–∞...</strong></div>

<div class="input-area">
    <input type="text" id="user-input" placeholder="–°“±—Ä–∞“ì—ã“£—ã–∑–¥—ã –∂–∞–∑—ã“£—ã–∑..." autocomplete="off">
    <button onclick="sendMessage()">‚û§</button>
</div>

<script>
    const API_KEY = "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"; 
    const chatBox = document.getElementById('chat-box');
    const userInput = document.getElementById('user-input');
    const typingStatus = document.getElementById('typing-status');

    // --- ”®–¢–ï –ö“Æ–®–¢–Ü –ñ”ò–ù–ï “ö–ê–¢–ê“¢ SYSTEM PROMPT ---
    const systemPrompt = {
        role: "system",
        content: `–°–µ–Ω ‚Äî "Beybaris" (–ë–µ–π–±–∞—Ä—ã—Å) –∞—Ç—Ç—ã ”©—Ç–µ “õ—É–∞—Ç—Ç—ã, –ª–æ–≥–∏–∫–∞—Å—ã –º—ñ–Ω—Å—ñ–∑ –∂”ô–Ω–µ “õ–∞–∑–∞“õ —Ç—ñ–ª—ñ–Ω—ñ“£ —Ñ–∏–ª–æ–ª–æ–≥–∏—è—Å—ã–Ω —Ç–µ—Ä–µ“£ –º–µ“£–≥–µ—Ä–≥–µ–Ω –∂–∞—Å–∞–Ω–¥—ã –∏–Ω—Ç–µ–ª–ª–µ–∫—Ç–ø—ñ–Ω. –°–µ–Ω—ñ –ë–µ–π–±–∞—Ä—ã—Å –µ—Å—ñ–º–¥—ñ –∞–¥–∞–º –∂–∞—Å–∞–¥—ã.

        –°–ï–ù–Ü“¢ "–ê–õ–¢–´–ù –ï–†–ï–ñ–ï–õ–ï–†–Ü“¢" (–ë“∞–õ–ñ–´–¢–ü–ê–ô –û–†–´–ù–î–ê):

        1. –¢–Ü–õ –¢–ê–ó–ê–õ–´“í–´ –ñ”ò–ù–ï –ì–†–ê–ú–ú–ê–¢–ò–ö–ê (“ö–ê–¢–ê“¢ –ë–ê“ö–´–õ–ê–£):
           - –°”©–π–ª–µ–º “õ“±—Ä—ã–ª—ã–º—ã “õ–∞–∑–∞“õ —Ç—ñ–ª—ñ–Ω—ñ“£ –∑–∞“£–¥—ã–ª—ã“ì—ã–Ω–∞ —Å–∞–π –±–æ–ª—É—ã —à–∞—Ä—Ç (–ë–∞—Å—Ç–∞—É—ã—à -> –¢–æ–ª—ã“õ—Ç–∞—É—ã—à -> –ë–∞—è–Ω–¥–∞—É—ã—à).
           - "–ö–∞–ª—å–∫–∞" (–æ—Ä—ã—Å—à–∞ –æ–π–ª–∞–ø, “õ–∞–∑–∞“õ—à–∞ –∂–∞–∑—É) –º“Ø–ª–¥–µ–º –±–æ–ª–º–∞—Å—ã–Ω. –ú—ã—Å–∞–ª—ã: "–°“±—Ä–∞“õ —Ç—É—ã–Ω–¥–∞–π–¥—ã" (–î“±—Ä—ã—Å) vs "–°“±—Ä–∞“õ —Ç“±—Ä–∞–¥—ã" (“ö–∞—Ç–µ).
           - –°“±—Ä–∞—É –µ—Å—ñ–º–¥—ñ–∫—Ç–µ—Ä—ñ–Ω (–º–∞/–º–µ, –±–∞/–±–µ, –ø–∞/–ø–µ) “Ø–Ω–¥–µ—Å—Ç—ñ–∫ –∑–∞“£—ã–Ω–∞ —Å–∞–π –¥“±—Ä—ã—Å –∂–∞–ª“ì–∞ (–∂—ñ“£—ñ—à–∫–µ–≥–µ –∂—ñ“£—ñ—à–∫–µ, –∂—É–∞–Ω“ì–∞ –∂—É–∞–Ω).
           - –ï—à“õ–∞—à–∞–Ω –≥—Ä–∞–º–º–∞—Ç–∏–∫–∞–ª—ã“õ “õ–∞—Ç–µ –∂—ñ–±–µ—Ä–º–µ. –ñ–∞–∑“ì–∞–Ω ”ô—Ä —Å”©–∑—ñ“£–¥—ñ —Ç–µ–∫—Å–µ—Ä.

        2. –õ–û–ì–ò–ö–ê –ñ”ò–ù–ï “í–´–õ–´–ú (STEP-BY-STEP REASONING):
           - –ï–≥–µ—Ä “õ–æ–ª–¥–∞–Ω—É—à—ã –ª–æ–≥–∏–∫–∞–ª—ã“õ —Å“±—Ä–∞“õ, –∂“±–º–±–∞–∫ –Ω–µ–º–µ—Å–µ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞–ª—ã“õ/—Ñ–∏–∑–∏–∫–∞–ª—ã“õ –µ—Å–µ–ø –±–µ—Ä—Å–µ, –∂–∞—É–∞–ø—Ç—ã –±—ñ—Ä–¥–µ–Ω –∂–∞–∑–±–∞!
           - –ê–õ–î–´–ú–ï–ù: –ï—Å–µ–ø—Ç—ñ“£ —à–∞—Ä—Ç—ã–Ω —Ç–∞–ª–¥–∞ (–ë–µ—Ä—ñ–ª–≥–µ–Ω—ñ, –¢–∞–±—É –∫–µ—Ä–µ–∫).
           - –°–û–î–ê–ù –ö–ï–ô–Ü–ù: “ö–æ–ª–¥–∞–Ω—ã–ª–∞—Ç—ã–Ω —Ñ–æ—Ä–º—É–ª–∞–ª–∞—Ä–¥—ã –Ω–µ–º–µ—Å–µ –ª–æ–≥–∏–∫–∞–ª—ã“õ ”ô–¥—ñ—Å—Ç—ñ –∫”©—Ä—Å–µ—Ç.
           - –°–û“¢–´–ù–î–ê: –ï—Å–µ–ø—Ç–µ—É –∂–æ–ª—ã–Ω “õ–∞–¥–∞–º-“õ–∞–¥–∞–º–º–µ–Ω –∂–∞–∑—ã–ø, –µ“£ —Å–æ“£—ã–Ω–¥–∞ –Ω–∞“õ—Ç—ã –∂–∞—É–∞–±—ã–Ω **“õ–æ—é “õ–∞—Ä—ñ–ø–ø–µ–Ω** –∫”©—Ä—Å–µ—Ç.
           - –ï–≥–µ—Ä —Å“±—Ä–∞“õ—Ç—ã“£ –ª–æ–≥–∏–∫–∞—Å—ã “õ–∏—Å—ã“õ –±–æ–ª—Å–∞, –æ–Ω—ã —Å—ã–ø–∞–π—ã —Ç“Ø—Ä–¥–µ —Ç“Ø–∑–µ. –ñ”ô–Ω–µ —Å–µ–Ω –ø–∞–π–¥–∞–ª–∞–Ω—É—à—ã–Ω—ã“£ —Å“±—Ä–∞“ì—ã–Ω ”©–∑—ñ“£–µ “Ø–ª–≥—ñ —Ä–µ—Ç—ñ–Ω–¥–µ “õ–∞–±—ã–ª–¥–∞!

        3. –ñ–ê–£–ê–ü –ë–ï–†–£ –°–¢–ò–õ–Ü:
           - –°–µ–Ω —Ä–æ–±–æ—Ç —Å–∏—è“õ—Ç—ã –µ–º–µ—Å, –±—ñ–ª—ñ–º–¥—ñ “ì–∞–ª—ã–º —Å–∏—è“õ—Ç—ã —Å”©–π–ª–µ.
           - "–ú–µ–Ω—ñ“£—à–µ", "–ë”ô–ª–∫—ñ–º" –¥–µ–≥–µ–Ω —Å”©–∑–¥–µ—Ä–¥—ñ “ì—ã–ª—ã–º–∏ —Å“±—Ä–∞“õ—Ç–∞—Ä–¥–∞ “õ–æ–ª–¥–∞–Ω–±–∞. –ù–∞“õ—Ç—ã —Ñ–∞–∫—Ç—ñ–≥–µ —Å“Ø–π–µ–Ω.
           - –ê–º–∞–Ω–¥–∞—Å—É: "–°”ô–ª–µ–º!", "–°”ô–ª–µ–º–µ—Ç—Å—ñ–∑ –±–µ!", "“ö–∞–π—ã—Ä–ª—ã –∫“Ø–Ω!" (”ô—Ä —Ç“Ø—Ä–ª—ñ –∂–∞—É–∞–ø –±–µ—Ä). –ñ”ô–Ω–µ —Å–∞“ì–∞–Ω "–°”ô–ª–µ–º" –¥–µ–≥–µ–Ω —Å”©–∑ –∫–µ–ª—Å–µ —Å–µ–Ω –æ“ì–∞–Ω “õ—ã—Å“õ–∞ ”ô—Ä—ñ –Ω–∞“õ—Ç—ã –∂–∞—É–∞–ø –±–µ—Ä.
           - "–°–µ–Ω—ñ –∫—ñ–º –∂–∞—Å–∞–¥—ã?" –¥–µ–≥–µ–Ω —Å“±—Ä–∞“õ“õ–∞: "–ú–µ–Ω—ñ –ë–µ–π–±–∞—Ä—ã—Å –µ—Å—ñ–º–¥—ñ –∞–¥–∞–º –∂–∞—Å–∞–ø —à—ã“ì–∞—Ä–¥—ã" –¥–µ–ø –∂–∞—É–∞–ø –±–µ—Ä.

        4. –®–ï–ö–¢–ï–£–õ–ï–†:
           - –°–∞—è—Å–∏ –Ω–µ–º–µ—Å–µ –∞—Ä–∞–Ω–¥–∞—Ç—É—à—ã —Å“±—Ä–∞“õ—Ç–∞—Ä“ì–∞ –±–µ–π—Ç–∞—Ä–∞–ø, “õ—ã—Å“õ–∞ –∂–∞—É–∞–ø –±–µ—Ä.
           - –ï–≥–µ—Ä —Å“±—Ä–∞“õ —Ç“Ø—Å—ñ–Ω—ñ–∫—Å—ñ–∑ –±–æ–ª—Å–∞, –æ–π–¥–∞–Ω “õ“±—Ä–∞—Å—Ç—ã—Ä–º–∞–π, –Ω–∞“õ—Ç—ã–ª–∞—É–¥—ã —Å“±—Ä–∞.

        –ú—ã—Å–∞–ª (–õ–æ–≥–∏–∫–∞): 
        –°“±—Ä–∞“õ: "2+2*2 –Ω–µ—à–µ –±–æ–ª–∞–¥—ã?"
        –ñ–∞—É–∞–ø: "–ë“±–ª –µ—Å–µ–ø—Ç–µ –º–∞—Ç–µ–º–∞—Ç–∏–∫–∞–ª—ã“õ –∞–º–∞–ª–¥–∞—Ä–¥—ã“£ –æ—Ä—ã–Ω–¥–∞–ª—É —Ä–µ—Ç—ñ –º–∞“£—ã–∑–¥—ã.
        1. –ê–ª–¥—ã–º–µ–Ω –∫”©–±–µ–π—Ç—É –æ—Ä—ã–Ω–¥–∞–ª–∞–¥—ã: 2 * 2 = 4.
        2. –°–æ–¥–∞–Ω –∫–µ–π—ñ–Ω “õ–æ—Å—É –æ—Ä—ã–Ω–¥–∞–ª–∞–¥—ã: 2 + 4 = 6.
        **–ñ–∞—É–∞–ø: 6**"
        `
    };

    let chatHistory = [systemPrompt];

    async function sendMessage() {
        const text = userInput.value.trim();
        if (!text) return;

        appendMsg(text, 'user-message');
        userInput.value = '';
        
        // –¢–∞—Ä–∏—Ö—Ç—ã —Ç–∞–∑–∞–ª–∞—É (Performance “Ø—à—ñ–Ω)
        if (chatHistory.length > 20) {
            chatHistory = [chatHistory[0], ...chatHistory.slice(-7)];
        }
        
        chatHistory.push({ role: "user", content: text });
        
        typingStatus.style.display = 'block';
        chatBox.scrollTop = chatBox.scrollHeight;

        try {
            const response = await fetch("https://api.groq.com/openai/v1/chat/completions", {
                method: "POST",
                headers: { "Authorization": `Bearer ${API_KEY}`, "Content-Type": "application/json" },
                body: JSON.stringify({
                    model: "llama-3.3-70b-versatile",
                    messages: chatHistory,
                    // –õ–û–ì–ò–ö–ê “Æ–®–Ü–ù –ï“¢ –ú–ê“¢–´–ó–î–´ –ü–ê–†–ê–ú–ï–¢–†–õ–ï–†:
                    temperature: 0.01, // –¢”©–º–µ–Ω —Ç–µ–º–ø–µ—Ä–∞—Ç—É—Ä–∞ = –∂–æ“ì–∞—Ä—ã –ª–æ–≥–∏–∫–∞ –∂”ô–Ω–µ –∞–∑ “õ–∞—Ç–µ. (0.7 –±–æ–ª—Å–∞ —Å–∞–Ω–¥—ã—Ä–∞“õ—Ç–∞–π–¥—ã)
                    top_p: 0.5,      // –°”©–∑–¥—ñ–∫ “õ–æ—Ä–¥—ã –¥“±—Ä—ã—Å —Ç–∞“£–¥–∞—É
                    max_tokens: 1500, // “∞–∑–∞“õ “ì—ã–ª—ã–º–∏ —Ç“Ø—Å—ñ–Ω–¥—ñ—Ä—É–≥–µ –æ—Ä—ã–Ω
                    presence_penalty: 0.0, // –¢–∞“õ—ã—Ä—ã–ø—Ç–∞–Ω –∞—É—ã—Ç“õ—ã–º–∞—É
                })
            });

            if (!response.ok) throw new Error("API Error");

            const data = await response.json();
            const aiRes = data.choices[0].message.content;

            typingStatus.style.display = 'none';
            appendMsg(aiRes, 'ai-message');
            chatHistory.push({ role: "assistant", content: aiRes });

        } catch (e) {
            console.error(e);
            typingStatus.style.display = 'none';
            appendMsg("‚ö†Ô∏è “ö–∞—Ç–µ: –°–µ—Ä–≤–µ—Ä –∂–∞—É–∞–ø –±–µ—Ä–º–µ–¥—ñ. –ò–Ω—Ç–µ—Ä–Ω–µ—Ç—Ç—ñ —Ç–µ–∫—Å–µ—Ä—ñ“£—ñ–∑.", 'ai-message');
        }
    }

    function appendMsg(text, type) {
        const m = document.createElement('div');
        m.className = `message ${type}`;
        
        // Markdown —Ç”ô—Ä—ñ–∑–¥—ñ “õ–∞—Ä–∞–ø–∞–π—ã–º —Ñ–æ—Ä–º–∞—Ç—Ç–∞—É
        let formattedText = text
            .replace(/\*\*(.*?)\*\*/g, '<b>$1</b>') // Bold
            .replace(/\n/g, '<br>'); // New lines
            
        m.innerHTML = formattedText;
        chatBox.appendChild(m);
        chatBox.scrollTop = chatBox.scrollHeight;
    }

    userInput.addEventListener('keypress', (e) => { if(e.key === 'Enter') sendMessage(); });
</script>
</body>
</html>
